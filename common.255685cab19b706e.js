"use strict";(self.webpackChunkwirepharma=self.webpackChunkwirepharma||[]).push([[592],{7231:(P,m,t)=>{t.d(m,{C:()=>n});var _=t(520),l=t(2340),c=t(5e3);const a=l.N.API_URL;let n=(()=>{class s{constructor(h){this._httpClient=h}uploadImage(h,E){const u=new FormData;return u.append("image",E,E.name),this._httpClient.post(`${a}/cloudinary/upload/${h}`,u)}removeImage(h){const E=h.slice(h.indexOf("wirepharma"),h.length).split(".")[0],u=(new _.LE).set("public_id",E);return this._httpClient.delete(`${a}/cloudinary/remove`,{params:u})}}return s.\u0275fac=function(h){return new(h||s)(c.LFG(_.eN))},s.\u0275prov=c.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},6428:(P,m,t)=>{t.d(m,{B:()=>c});const c=(0,t(5620).P1)(a=>a.pagination,a=>a.pagination)},2911:(P,m,t)=>{t.d(m,{K:()=>c,d:()=>a});var _=t(5e3),l=t(9851);let c=(()=>{class n{constructor(i){this._merchantsService=i}resolve(i,h){return this._merchantsService.getMerchants()}}return n.\u0275fac=function(i){return new(i||n)(_.LFG(l.S))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a=(()=>{class n{constructor(i){this._merchantsService=i}resolve(i,h){const E=i.paramMap.get("merchantId");if("new"!==E)return this._merchantsService.getMerchantById(E)}}return n.\u0275fac=function(i){return new(i||n)(_.LFG(l.S))},n.\u0275prov=_.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},1910:(P,m,t)=>{t.d(m,{Qs:()=>c,UV:()=>a});var _=t(5620);const l=n=>n.merchants,c=(0,_.P1)(l,n=>n.merchant),a=(0,_.P1)(l,n=>n.merchants)},9851:(P,m,t)=>{t.d(m,{S:()=>O});var _=t(1135),l=t(8505),c=t(5698),a=t(3900),n=t(4004),s=t(2112),i=t(2340),h=t(5e3),E=t(520),u=t(5620);const d=i.N.API_URL;let O=(()=>{class p{constructor(e,r){this._httpClient=e,this.store=r,this._merchant=new _.X(null),this._merchants=new _.X([]),this._domains=new _.X([]),this._states=new _.X([])}get merchant$(){return this._merchant.asObservable()}get merchants$(){return this._merchants.asObservable()}get domains$(){return this._domains.asObservable()}get states$(){return this._states.asObservable()}getMerchants(){return this._httpClient.get(`${d}/merchants`).pipe((0,l.b)(({merchants:e})=>{this.store.dispatch((0,s.ZE)({merchants:e}))}))}getMerchantById(e){return this._httpClient.get(`${d}/merchants/${e}`).pipe((0,c.q)(1),(0,l.b)(({merchant:r})=>{this.store.dispatch((0,s.p5)({merchant:r}))}))}createMerchant(e){return this.merchants$.pipe((0,c.q)(1),(0,a.w)(r=>this._httpClient.post(`${d}/merchants`,e).pipe((0,n.U)(o=>(this._merchants.next([o.merchant,...r]),this.store.dispatch((0,s.nw)({merchant:o.merchant,merchants:[o.merchant,...r]})),o)))))}updateMerchant(e){return this.merchants$.pipe((0,c.q)(1),(0,a.w)(r=>this._httpClient.patch(`${d}/merchants/${e._id}`,e).pipe((0,n.U)(o=>{const v=r.findIndex(M=>M._id===e._id);return r[v]=o.merchant,this._merchants.next(r),this.store.dispatch((0,s.nw)({merchant:o.merchant,merchants:r})),o.merchant}))))}deleteMerchant(e){return this.merchants$.pipe((0,c.q)(1),(0,a.w)(r=>this._httpClient.delete(`${d}/merchants/${e}`).pipe((0,n.U)(o=>{const v=r.findIndex(M=>M._id===e);return r.splice(v,1),this._merchants.next(r),this.store.dispatch((0,s.ZE)({merchants:r})),o}))))}}return p.\u0275fac=function(e){return new(e||p)(h.LFG(E.eN),h.LFG(u.yh))},p.\u0275prov=h.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1349:(P,m,t)=>{t.d(m,{N:()=>O});var _=t(1135),l=t(2843),c=t(9646),a=t(5698),n=t(3900),s=t(4004),i=t(8505),h=t(2340),E=t(5e3),u=t(520);const d=h.N.API_URL;let O=(()=>{class p{constructor(e){this._httpClient=e,this._singleRole=new _.X(null),this._roles=new _.X(null),this._permissions=new _.X(null)}get singleRole$(){return this._singleRole.asObservable()}get roles$(){return this._roles.asObservable()}get permissions$(){return this._permissions.asObservable()}createRole(e){return this.roles$.pipe((0,a.q)(1),(0,n.w)(r=>this._httpClient.post(`${d}/roles/`,e).pipe((0,s.U)(o=>(this._roles.next([o.role,...r]),o.role)))))}getRoles(){return this._httpClient.get(`${d}/roles/`).pipe((0,i.b)(e=>{this._roles.next(e.roles)}))}getPermissions(){return this._httpClient.get(`${d}/roles/permissions/`).pipe((0,i.b)(e=>{this._permissions.next(e.permissions)}))}getByUserId(e){return this._httpClient.get(`${d}/users/${e}/roles`).pipe((0,s.U)(r=>r.roles))}getRoleById(e){return this._roles.pipe((0,a.q)(1),(0,s.U)(r=>{const o=r.find(v=>v._id===e)||null;return this._singleRole.next(o),o}),(0,n.w)(r=>r?(0,c.of)(r):(0,l._)("No existe un rol con el:"+e+"!")))}updateRole(e){return this.roles$.pipe((0,a.q)(1),(0,n.w)(r=>this._httpClient.patch(`${d}/roles/${e._id}`,e).pipe((0,s.U)(o=>{const v=r.findIndex(M=>M._id===e._id);return r[v]=o.updatedRole,this._roles.next(r),o.updatedRole}))))}deleteRole(e){return this.roles$.pipe((0,a.q)(1),(0,n.w)(r=>this._httpClient.delete(`${d}/roles/${e} `).pipe((0,s.U)(o=>{const v=r.findIndex(M=>M._id===e);return r.splice(v,1),this._roles.next(r),o}))))}}return p.\u0275fac=function(e){return new(e||p)(E.LFG(u.eN))},p.\u0275prov=E.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);