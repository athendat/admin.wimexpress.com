"use strict";(self.webpackChunkwirepharma=self.webpackChunkwirepharma||[]).push([[654],{3654:(q,g,o)=>{o.r(g),o.d(g,{CustomersModule:()=>H});var u=o(5357),y=o(3637),t=o(5e3);let A=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["crm-customers"]],decls:1,vars:0,template:function(s,r){1&s&&t._UZ(0,"router-outlet")},directives:[u.lC],encapsulation:2}),e})();var a=o(3075),h=o(6087),l=o(4847),b=o(9646),T=o(7579),I=o(6451),p=o(2722),F=o(8372),f=o(3900),c=o(5620);const v=e=>e.customers,L=((0,c.P1)(v,e=>e.customer),(0,c.P1)(v,e=>e.customers));var S=o(6428),U=o(3844),x=o(520),R=o(8505),w=o(5102),B=o(5714);const Q=o(2340).N.API_URL;let C=(()=>{class e{constructor(s,r){this._httpClient=s,this.store=r}getCustomers(s=0,r=10,i="name",d="asc",W=""){const K=(new x.LE).append("page",s.toString()).append("size",r.toString()).append("sort",i).append("order",d).append("search",W);return this._httpClient.get(`${Q}/clients/`,{params:K}).pipe((0,R.b)(({pagination:V,clients:X})=>{this.store.dispatch((0,B.Jr)({pagination:V})),this.store.dispatch((0,w.Pb)({customers:X}))}))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(x.eN),t.LFG(c.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=o(1927),J=o(5245),Z=o(7322),O=o(7531),m=o(9808);const Y=["htmlOrderList"];function E(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",27)(2,"div",28),t._uU(3),t.qZA(),t.TgZ(4,"div",29),t._uU(5),t.qZA(),t.TgZ(6,"div",28),t._uU(7),t.qZA(),t.TgZ(8,"div",30),t._uU(9),t.qZA(),t.TgZ(10,"div",24),t._uU(11),t.qZA(),t.TgZ(12,"div",24),t._uU(13),t.qZA(),t.TgZ(14,"div",24),t._uU(15),t.qZA()(),t.BQk()),2&e){const s=n.$implicit;t.xp6(3),t.lnq(" ",s.name," ",s.lastname1," ",s.lastname2," "),t.xp6(2),t.hij(" ",s.idNumber," "),t.xp6(2),t.hij(" ",s.email," "),t.xp6(2),t.hij(" ",s.phone," "),t.xp6(2),t.hij(" ",s.country," "),t.xp6(2),t.hij(" ",s.state," "),t.xp6(2),t.hij(" ",s.city," ")}}function j(e,n){if(1&e&&(t.ynx(0),t.YNc(1,E,16,9,"ng-container",26),t.BQk()),2&e){const s=n.ngIf,r=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",s)("ngForTrackBy",r.trackByFn)}}const M=function(e){return{"pointer-events-none":e}},G=function(){return[5,10,25,100]};function k(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",19)(2,"div",20)(3,"div",21),t._uU(4," Nombre "),t.qZA(),t.TgZ(5,"div",22),t._uU(6," Identificaci\xf3n "),t.qZA(),t.TgZ(7,"div",23),t._uU(8," Correo electr\xf3nico "),t.qZA(),t.TgZ(9,"div",22),t._uU(10," Tel\xe9fono "),t.qZA(),t.TgZ(11,"div",24),t._uU(12," Pa\xeds "),t.qZA(),t.TgZ(13,"div",24),t._uU(14," Estado "),t.qZA(),t.TgZ(15,"div",24),t._uU(16," Ciudad "),t.qZA()(),t.YNc(17,j,2,2,"ng-container",16),t.ALo(18,"async"),t.qZA(),t._UZ(19,"mat-paginator",25),t.BQk()),2&e){const s=t.oxw(2);t.xp6(3),t.Q6J("mat-sort-header","name"),t.xp6(14),t.Q6J("ngIf",t.lcZ(18,8,s.customers$)),t.xp6(2),t.Q6J("ngClass",t.VKq(10,M,s.isLoading))("length",s.pagination.length)("pageIndex",s.pagination.page)("pageSize",s.pagination.size)("pageSizeOptions",t.DdM(12,G))("showFirstLastButtons",!0)}}function D(e,n){if(1&e&&(t.ynx(0),t.YNc(1,k,20,13,"ng-container",18),t.BQk()),2&e){const s=n.ngIf;t.oxw();const r=t.MAs(23);t.xp6(1),t.Q6J("ngIf",s.length>0)("ngIfElse",r)}}function P(e,n){1&e&&(t.TgZ(0,"div",31),t._uU(1,"\xa1No se ha registrado ning\xfan cliente!"),t.qZA())}const $=[{path:"",component:A,children:[{path:"",component:(()=>{class e{constructor(s,r,i,d){this._changeDetectorRef=s,this._customersService=r,this._fileSaverService=i,this.store=d,this.isLoading=!1,this.customers=[],this.customers$=(0,b.of)([]),this.searchInputControl=new a.NI,this._unsubscribeAll=new T.x}ngOnInit(){this.store.select(S.B).pipe((0,p.R)(this._unsubscribeAll)).subscribe(s=>{this.pagination=s,this._changeDetectorRef.markForCheck()}),this.customers$=this.store.select(L),this.customers$.subscribe(s=>this.customers=s),this.searchInputControl.valueChanges.pipe((0,p.R)(this._unsubscribeAll),(0,F.b)(900),(0,f.w)(s=>this._customersService.getCustomers(0,10,"orderNo","asc",s))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,p.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,I.T)(this._sort.sortChange,this._paginator.page).pipe((0,f.w)(()=>this._customersService.getCustomers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.customers,"customers")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.customers,"customers")}trackByFn(s,r){return r.id||s}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(t.sBO),t.Y36(C),t.Y36(z.m),t.Y36(c.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["crm-customers-list"]],viewQuery:function(s,r){if(1&s&&(t.Gf(Y,5),t.Gf(h.NW,5),t.Gf(l.YE,5)),2&s){let i;t.iGM(i=t.CRH())&&(r.htmlOrderList=i.first),t.iGM(i=t.CRH())&&(r._paginator=i.first),t.iGM(i=t.CRH())&&(r._sort=i.first)}},decls:24,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noCustomers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","customers-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"hidden","text-center","lg:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","customers-grid","md:px-8"],[1,"truncate"],[1,"hidden","sm:block"],[1,"hidden","truncate","sm:block"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(s,r){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Inicio"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Clientes"),t.qZA()()(),t.TgZ(11,"div",8)(12,"h2",9),t._uU(13," Clientes "),t.qZA()()(),t.TgZ(14,"div",10)(15,"mat-form-field",11),t._UZ(16,"mat-icon",12)(17,"input",13),t.qZA()()(),t.TgZ(18,"div",14)(19,"div",15),t.YNc(20,D,2,2,"ng-container",16),t.ALo(21,"async"),t.YNc(22,P,2,0,"ng-template",null,17,t.W1O),t.qZA()()()),2&s&&(t.xp6(8),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(8),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(1),t.Q6J("formControl",r.searchInputControl)("autocomplete","off")("placeholder","Buscar clientes"),t.xp6(3),t.Q6J("ngIf",t.lcZ(21,6,r.customers$)))},directives:[u.yS,J.Hw,Z.KE,Z.qo,O.Nt,a.Fj,a.JJ,a.oH,m.O5,l.YE,l.nU,m.sg,h.NW,m.mk],pipes:[m.Ov],styles:[".customers-grid{grid-template-columns:auto 150px}@media (min-width: 600px){.customers-grid{grid-template-columns:auto 120px 150px 120px}}@media (min-width: 960px){.customers-grid{grid-template-columns:auto 120px 150px 120px}}@media (min-width: 1280px){.customers-grid{grid-template-columns:auto 120px 150px 120px 96px 96px 72px 72px}}\n"],encapsulation:2,data:{animation:U.L},changeDetection:0}),e})(),resolve:{customers:(()=>{class e{constructor(s){this._customersService=s}resolve(s,r){return this._customersService.getCustomers()}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(C))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]}];let H=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild($),y.m]]}),e})()}}]);