"use strict";(self.webpackChunkwirepharma=self.webpackChunkwirepharma||[]).push([[592],{7231:(O,d,t)=>{t.d(d,{C:()=>p});var i=t(520),c=t(2340),a=t(5e3);const r=c.N.API_URL;let p=(()=>{class n{constructor(o){this._httpClient=o}uploadImage(o,l){const h=new FormData;return h.append("image",l,l.name),this._httpClient.post(`${r}/cloudinary/upload/${o}`,h)}removeImage(o){const l=o.slice(o.indexOf("wirepharma"),o.length).split(".")[0],h=(new i.LE).set("public_id",l);return this._httpClient.delete(`${r}/cloudinary/remove`,{params:h})}}return n.\u0275fac=function(o){return new(o||n)(a.LFG(i.eN))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},6428:(O,d,t)=>{t.d(d,{B:()=>a});const a=(0,t(5620).P1)(r=>r.pagination,r=>r.pagination)},1349:(O,d,t)=>{t.d(d,{N:()=>R});var i=t(1135),c=t(2843),a=t(9646),r=t(5698),p=t(3900),n=t(4004),v=t(8505),o=t(2340),l=t(5e3),h=t(520);const u=o.N.API_URL;let R=(()=>{class E{constructor(e){this._httpClient=e,this._singleRole=new i.X(null),this._roles=new i.X(null),this._permissions=new i.X(null)}get singleRole$(){return this._singleRole.asObservable()}get roles$(){return this._roles.asObservable()}get permissions$(){return this._permissions.asObservable()}createRole(e){return this.roles$.pipe((0,r.q)(1),(0,p.w)(s=>this._httpClient.post(`${u}/roles/`,e).pipe((0,n.U)(_=>(this._roles.next([_.role,...s]),_.role)))))}getRoles(){return this._httpClient.get(`${u}/roles/`).pipe((0,v.b)(e=>{this._roles.next(e.roles)}))}getPermissions(){return this._httpClient.get(`${u}/roles/permissions/`).pipe((0,v.b)(e=>{this._permissions.next(e.permissions)}))}getByUserId(e){return this._httpClient.get(`${u}/users/${e}/roles`).pipe((0,n.U)(s=>s.roles))}getRoleById(e){return this._roles.pipe((0,r.q)(1),(0,n.U)(s=>{const _=s.find(P=>P._id===e)||null;return this._singleRole.next(_),_}),(0,p.w)(s=>s?(0,a.of)(s):(0,c._)("No existe un rol con el:"+e+"!")))}updateRole(e){return this.roles$.pipe((0,r.q)(1),(0,p.w)(s=>this._httpClient.patch(`${u}/roles/${e._id}`,e).pipe((0,n.U)(_=>{const P=s.findIndex(m=>m._id===e._id);return s[P]=_.updatedRole,this._roles.next(s),_.updatedRole}))))}deleteRole(e){return this.roles$.pipe((0,r.q)(1),(0,p.w)(s=>this._httpClient.delete(`${u}/roles/${e} `).pipe((0,n.U)(_=>{const P=s.findIndex(m=>m._id===e);return s.splice(P,1),this._roles.next(s),_}))))}}return E.\u0275fac=function(e){return new(e||E)(l.LFG(h.eN))},E.\u0275prov=l.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()}}]);