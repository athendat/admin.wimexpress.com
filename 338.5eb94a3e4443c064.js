"use strict";(self.webpackChunkwimexpress=self.webpackChunkwimexpress||[]).push([[338],{4338:(le,_,r)=>{r.r(_),r.d(_,{FreightsModule:()=>ae});var m=r(9116),b=r(3786),a=r(4006),v=r(8739),f=r(6308),x=r(9646),Z=r(7579),C=r(6451),c=r(2722),A=r(3900),T=r(7489),y=r(4787),k=r(6691),I=r(6428),Q=r(3844),e=r(4650),J=r(1927),F=r(8342),U=r(1683),S=r(9653),l=r(6895),R=r(4098),w=r(3238),N=r(4859),u=r(148),E=r(7392),p=r(9549),M=r(4144),d=r(5655),Y=r(4385),B=r(266),q=r(1066);const D=["htmlFreightList"];function L(i,n){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El costo es obligatorio. "),e.qZA())}function z(i,n){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El tipo de flete es obligatorio. "),e.qZA())}function O(i,n){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha del flete es obligatoria. "),e.qZA())}function G(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveFreight())}),e._UZ(2,"mat-icon",35),e.TgZ(3,"span",36),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.freightForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function $(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.updateFreight())}),e._UZ(2,"mat-icon",35),e.TgZ(3,"span",36),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.freightForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function V(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"mat-icon",51),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("svgIcon","mat_solid:directions_boat")("matTooltip",t.type)}}function H(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"mat-icon",51),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("svgIcon","mat_solid:flight_takeoff")("matTooltip",t.type)}}function j(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",52),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function K(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",53),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function W(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",46),e._UZ(2,"div"),e.TgZ(3,"div",47),e._uU(4),e.ALo(5,"number"),e.qZA(),e.TgZ(6,"div",48),e.YNc(7,V,2,2,"ng-container",17),e.YNc(8,H,2,2,"ng-container",17),e.qZA(),e.TgZ(9,"div",42),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",42),e.YNc(13,j,2,1,"ng-container",17),e.YNc(14,K,2,1,"ng-container",17),e.qZA(),e.TgZ(15,"div",49)(16,"button",50),e.NdJ("click",function(){const g=e.CHM(t).$implicit,h=e.oxw(4);return e.KtG(h.editFreight(g))}),e._UZ(17,"mat-icon",29),e.qZA(),e.TgZ(18,"button",50),e.NdJ("click",function(){const g=e.CHM(t).$implicit,h=e.oxw(4);return e.KtG(h.deleteFreight(g))}),e._UZ(19,"mat-icon",29),e.qZA()()(),e.BQk()}if(2&i){const t=n.$implicit;e.xp6(4),e.hij(" ",e.xi3(5,8,t.cost,"1.2-2")," USD/kg "),e.xp6(3),e.Q6J("ngIf","Mar\xedtimo"===t.type),e.xp6(1),e.Q6J("ngIf","A\xe9reo"===t.type),e.xp6(2),e.hij(" ",e.xi3(11,11,t.date,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function P(i,n){if(1&i&&(e.ynx(0),e.YNc(1,W,20,14,"ng-container",45),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const X=function(i){return{"pointer-events-none":i}},ee=function(){return[5,10,25,100]};function te(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",38)(2,"div",39),e._UZ(3,"div"),e.TgZ(4,"div",40),e._uU(5," Costo "),e.qZA(),e.TgZ(6,"div",41),e._uU(7," Tipo "),e.qZA(),e.TgZ(8,"div",42),e._uU(9," Fecha "),e.qZA(),e.TgZ(10,"div",42),e._uU(11," Activo "),e.qZA(),e.TgZ(12,"div",43),e._uU(13," Acciones "),e.qZA()(),e.YNc(14,P,2,2,"ng-container",17),e.ALo(15,"async"),e._UZ(16,"mat-paginator",44),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(10),e.Q6J("ngIf",e.lcZ(15,8,t.freights$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,X,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,ee))("showFirstLastButtons",!0)}}function ie(i,n){if(1&i&&(e.ynx(0),e.YNc(1,te,17,13,"ng-container",37),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(59);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function re(i,n){1&i&&(e.TgZ(0,"div",54),e._uU(1,"\xa1No hay Fletes registrados!"),e.qZA())}const se=[{path:"",component:(()=>{class i{constructor(t,o,s,g,h,ce,ge){this._activatedRoute=t,this._changeDetectorRef=o,this._fileSaverService=s,this._formBuilder=g,this._freightsService=h,this._fuseConfirmationService=ce,this.store=ge,this.freight=null,this.freights=[],this.freights$=(0,x.of)([]),this.isUpdate=!1,this.user$=(0,x.of)(null),this._unsubscribeAll=new Z.x}ngOnInit(){this.user$=this.store.select(y.rk),this.user$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.freights$=this.store.select(k.JT),this.freights$.subscribe(t=>this.freights=t),this.store.select(I.B).pipe((0,c.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.freightForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[a.kI.required]],active:[!0,[a.kI.required]],cost:[null,[a.kI.required,a.kI.min(0),a.kI.max(99999999),a.kI.maxLength(8)]],type:[null,[a.kI.required]],date:[null,[a.kI.required]]})}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,C.T)(this._sort.sortChange,this._paginator.page).pipe((0,A.w)(()=>this._freightsService.getFreights(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.freights,"freights")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.freights,"freights")}saveFreight(){let t=this.freightForm.getRawValue();t=(0,T.omit)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear flete",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.R)(this._unsubscribeAll)).subscribe(s=>{"confirmed"===s&&this._freightsService.createFreight(t).pipe((0,c.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Flete creado correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.freightForm.reset(),this.freightForm.get("userId").setValue(this.user._id),this.freightForm.get("active").setValue(!0),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}editFreight(t){this.isUpdate=!0,this.freightForm.patchValue(t)}updateFreight(){const t=this.freightForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar flete",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.R)(this._unsubscribeAll)).subscribe(s=>{"confirmed"===s&&this._freightsService.updateFreight(t).pipe((0,c.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Flete actualizado correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.isUpdate=!1,this.freightForm.reset(),this.freightForm.get("userId").setValue(this.user._id),this.freightForm.get("active").setValue(!0),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}deleteFreight(t){this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar este flete?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.R)(this._unsubscribeAll)).subscribe(s=>{"confirmed"===s&&this._freightsService.deleteFreight(t._id).pipe((0,c.R)(this._unsubscribeAll)).subscribe(g=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${g.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.gz),e.Y36(e.sBO),e.Y36(J.m),e.Y36(a.QS),e.Y36(F.H),e.Y36(U.R),e.Y36(S.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-freights"]],viewQuery:function(t,o){if(1&t&&(e.Gf(D,5),e.Gf(v.NW,5),e.Gf(f.YE,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.htmlFreightList=s.first),e.iGM(s=e.CRH())&&(o._paginator=s.first),e.iGM(s=e.CRH())&&(o._sort=s.first)}},decls:60,vars:27,consts:[["cdkScrollable","","fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-wrap","items-center","justify-center","gap-5","mt-6",3,"formGroup","autocomplete"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-60"],["matInput","","type","number","min","0","required","",3,"formControlName","placeholder"],["matSuffix",""],[4,"ngIf"],["required","",3,"formControlName","placeholder"],[3,"value"],["matInput","","required","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["picker",""],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","overflow-auto","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["xPosition","before"],["listCard01Menu","matMenu"],["mat-menu-item","",3,"click"],["noFreights",""],["mat-button","",1,"rounded-md","bg-primary-500",3,"disabled","click"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[4,"ngIf","ngIfElse"],["fuseScrollbar","",1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","freight-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","text-center","md:block"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","freight-grid","md:px-8"],[1,"truncate"],[1,"hidden","truncate","md:block"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon","matTooltip"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Fletes"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"h2",12),e._uU(19," Listado de precios de Fletes "),e.qZA()()(),e.TgZ(20,"form",13)(21,"mat-form-field",14),e._UZ(22,"input",15),e.TgZ(23,"span",16),e._uU(24,"USD/kg"),e.qZA(),e.YNc(25,L,2,0,"mat-error",17),e.qZA(),e.TgZ(26,"mat-form-field",14)(27,"mat-select",18),e._UZ(28,"mat-option",19),e.TgZ(29,"mat-option",19),e._uU(30,"A\xe9reo"),e.qZA(),e.TgZ(31,"mat-option",19),e._uU(32,"Mar\xedtimo"),e.qZA()(),e.YNc(33,z,2,0,"mat-error",17),e.qZA(),e.TgZ(34,"mat-form-field",14),e._UZ(35,"input",20)(36,"mat-datepicker-toggle",21)(37,"mat-datepicker",null,22),e.YNc(39,O,2,0,"mat-error",17),e.qZA(),e.YNc(40,G,5,2,"ng-container",17),e.YNc(41,$,5,2,"ng-container",17),e.qZA()(),e.TgZ(42,"div",23)(43,"div",24)(44,"div",25)(45,"div",26),e._uU(46,"Listado de Fletes"),e.qZA(),e.TgZ(47,"div",27)(48,"button",28),e._UZ(49,"mat-icon",29),e.qZA(),e.TgZ(50,"mat-menu",30,31)(52,"button",32),e.NdJ("click",function(){return o.exportAsExcelFile()}),e._uU(53,"Exportar a Excel"),e.qZA(),e.TgZ(54,"button",32),e.NdJ("click",function(){return o.exportAsCsvFile()}),e._uU(55,"Exportar a CSV"),e.qZA()()()(),e.YNc(56,ie,2,2,"ng-container",17),e.ALo(57,"async"),e.YNc(58,re,2,0,"ng-template",null,33,e.W1O),e.qZA()()()),2&t){const s=e.MAs(38),g=e.MAs(51);e.xp6(6),e.Q6J("routerLink","/home"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(6),e.Q6J("formGroup",o.freightForm)("autocomplete","off"),e.xp6(2),e.Q6J("formControlName","cost")("placeholder","Costo"),e.xp6(3),e.Q6J("ngIf",o.freightForm.get("cost").hasError("required")&&o.freightForm.get("cost").touched),e.xp6(2),e.Q6J("formControlName","type")("placeholder","Tipo de flete"),e.xp6(1),e.Q6J("value",""),e.xp6(1),e.Q6J("value","A\xe9reo"),e.xp6(2),e.Q6J("value","Mar\xedtimo"),e.xp6(2),e.Q6J("ngIf",o.freightForm.get("type").hasError("required")&&o.freightForm.get("type").touched),e.xp6(2),e.Q6J("matDatepicker",s)("formControlName","date")("placeholder","Fecha"),e.xp6(1),e.Q6J("for",s),e.xp6(3),e.Q6J("ngIf",o.freightForm.get("date").hasError("required")&&o.freightForm.get("date").touched),e.xp6(1),e.Q6J("ngIf",!o.isUpdate),e.xp6(1),e.Q6J("ngIf",o.isUpdate),e.xp6(7),e.Q6J("matMenuTriggerFor",g),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(7),e.Q6J("ngIf",e.lcZ(57,25,o.freights$))}},dependencies:[m.yS,l.mk,l.sg,l.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.qQ,a.sg,a.u,R.PQ,w.ey,N.lW,u.Mq,u.hl,u.nW,E.Hw,p.TO,p.KE,p.R9,M.Nt,d.VK,d.OP,d.p6,v.NW,Y.gD,f.YE,f.nU,B.gM,q.H,l.Ov,l.JJ,l.uU],encapsulation:2,data:{animation:Q.L},changeDetection:0}),i})(),resolve:{freights:(()=>{class i{constructor(t){this._freightsService=t}resolve(t,o){return this._freightsService.getFreights()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(F.H))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}];let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(se),b.m]}),i})()}}]);