"use strict";(self.webpackChunkwimexpress=self.webpackChunkwimexpress||[]).push([[805],{805:(et,U,c)=>{c.r(U),c.d(U,{CouriersModule:()=>We});var g=c(9116),z=c(3786),a=c(4006),J=c(8739),A=c(6308),k=c(7579),j=c(6451),u=c(2722),H=c(8372),_=c(3900),Z=c(4004),h=c(9653);const q=i=>i.couriers,P=(0,h.P1)(q,i=>i.courier),y=(0,h.P1)(q,i=>i.couriers);var K=c(6428),D=c(3844),w=c(5938),S=c(9646),N=c(7489),R=c(4787),e=c(4650),B=c(529),I=c(5698),Y=c(8505),V=c(5714),x=c(7693);const v=c(2340).N.API_URL;let C=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}createCourier(t){return this.store.select(y).pipe((0,I.q)(1),(0,_.w)(o=>this._httpClient.post(`${v}/couriers/`,t).pipe((0,Y.b)(r=>{const s=[...o];this.store.dispatch((0,x.er)({couriers:[...s,r.courier]}))}))))}getCouriers(t=0,o=10,r="orderNo",s="asc",l=""){const m=(new B.LE).append("page",t.toString()).append("size",o.toString()).append("sort",r).append("order",s).append("search",l);return this._httpClient.get(`${v}/couriers/`,{params:m}).pipe((0,Y.b)(({pagination:p,couriers:d})=>{this.store.dispatch((0,V.Jr)({pagination:p})),this.store.dispatch((0,x.er)({couriers:d}))}))}getCourierById(t){if(null!==t)return this._httpClient.get(`${v}/couriers/${t}`).pipe((0,Z.U)(({courier:o})=>(this.store.dispatch((0,x.dI)({courier:o})),o)))}updateCourier(t){return this.store.select(y).pipe((0,I.q)(1),(0,_.w)(o=>this._httpClient.patch(`${v}/couriers/${t._id}`,t).pipe((0,Z.U)(r=>{const s=[...o],l=s.findIndex(m=>m._id===t._id);return s[l]=r.courier,this.store.dispatch((0,x.er)({couriers:s})),r}))))}deleteCourier(t){return this.store.select(y).pipe((0,I.q)(1),(0,_.w)(o=>this._httpClient.delete(`${v}/couriers/${t}`).pipe((0,Z.U)(r=>{const s=[...o],l=o.findIndex(m=>m._id===t);return s.splice(l,1),this.store.dispatch((0,x.er)({couriers:s})),r}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(B.eN),e.LFG(h.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var F=c(1683),E=c(1158);function X(i,n){1&i&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar operador log\xedstico"),e.qZA())}function ee(i,n){1&i&&(e.TgZ(0,"h2",7),e._uU(1,"Editar operador log\xedstico"),e.qZA())}function te(i,n){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11),e._uU(4,"Detalles del operador log\xedstico"),e.qZA(),e.TgZ(5,"div",12),e.ynx(6),e.TgZ(7,"div",13)(8,"div",14),e._uU(9,"Nombre"),e.qZA(),e.TgZ(10,"div",15),e._uU(11),e.qZA()(),e.BQk(),e.ynx(12),e.TgZ(13,"div",13)(14,"div",14),e._uU(15,"C\xf3digo"),e.qZA(),e.TgZ(16,"div",15),e._uU(17),e.qZA()(),e.BQk(),e.ynx(18),e.TgZ(19,"div",13)(20,"div",14),e._uU(21,"Descripci\xf3n"),e.qZA(),e.TgZ(22,"div",15),e._uU(23),e.qZA()(),e.BQk(),e.ynx(24),e.TgZ(25,"div",13)(26,"div",14),e._uU(27,"Cost"),e.qZA(),e.TgZ(28,"div",15),e._uU(29),e.ALo(30,"currency"),e.qZA()(),e.BQk(),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(11),e.Oqu(t.courier.name),e.xp6(6),e.Oqu(t.courier.code),e.xp6(6),e.Oqu(t.courier.description),e.xp6(6),e.Oqu(e.xi3(30,4,t.courier.cost,"USD "))}}function ie(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function oe(i,n){if(1&i&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function re(i,n){if(1&i&&(e.TgZ(0,"div",16)(1,"div",17)(2,"form",18)(3,"div",19)(4,"div",20)(5,"mat-form-field",21)(6,"mat-label"),e._uU(7,"Nombre del operador log\xedstico"),e.qZA(),e._UZ(8,"input",22),e.qZA(),e.TgZ(9,"mat-form-field",23)(10,"mat-label"),e._uU(11,"Persona de contacto"),e.qZA(),e._UZ(12,"input",22),e.qZA(),e.TgZ(13,"div",24)(14,"div",25)(15,"mat-form-field",21)(16,"mat-label"),e._uU(17,"Correo electr\xf3nico"),e.qZA(),e._UZ(18,"input",22),e.qZA()(),e.TgZ(19,"div",25)(20,"mat-form-field",21)(21,"mat-label"),e._uU(22,"Tel\xe9fono"),e.qZA(),e._UZ(23,"input",22),e.qZA()()(),e.TgZ(24,"mat-form-field",23)(25,"mat-label"),e._uU(26,"Direcci\xf3n"),e.qZA(),e._UZ(27,"input",22),e.qZA(),e.TgZ(28,"div",24)(29,"div",25)(30,"mat-form-field",26)(31,"mat-label"),e._uU(32,"Provincia"),e.qZA(),e._UZ(33,"mat-icon",27),e.TgZ(34,"mat-select",28),e.YNc(35,ie,2,2,"mat-option",29),e.qZA()()(),e.TgZ(36,"div",25)(37,"mat-form-field",26)(38,"mat-label"),e._uU(39,"Municipio"),e.qZA(),e._UZ(40,"mat-icon",27),e.TgZ(41,"mat-select",28),e.YNc(42,oe,2,2,"mat-option",29),e.qZA()()()(),e.TgZ(43,"div",30)(44,"mat-form-field",25)(45,"mat-label"),e._uU(46,"Costo"),e.qZA(),e.TgZ(47,"span",31),e._uU(48,"USD"),e.qZA(),e._UZ(49,"input",32),e.qZA()(),e.TgZ(50,"mat-form-field",33)(51,"mat-label"),e._uU(52,"Observaciones"),e.qZA(),e._UZ(53,"textarea",34),e.qZA(),e.TgZ(54,"div",35)(55,"span",36),e._uU(56,"Estado"),e.qZA(),e.TgZ(57,"mat-slide-toggle",37),e._uU(58),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.courierForm)("autocomplete","off"),e.xp6(6),e.Q6J("type","text")("formControlName","name"),e.xp6(4),e.Q6J("type","text")("formControlName","contact"),e.xp6(6),e.Q6J("type","email")("formControlName","email"),e.xp6(5),e.Q6J("type","tel")("formControlName","phone"),e.xp6(4),e.Q6J("type","text")("formControlName","address"),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",t.states)("ngForTrackBy",t.trackByFn),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",t.cities)("ngForTrackBy",t.trackByFn),e.xp6(7),e.Q6J("type","number")("formControlName","shippingCost")("min",0),e.xp6(4),e.Q6J("formControlName","obs"),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.courierForm.get("active").value?"Activo":"Inactivo"," ")}}function ne(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateCourier())}),e._uU(1,"Actualizar"),e.qZA()}2&i&&e.Q6J("color","primary")}function se(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.createCourier())}),e._uU(1,"Agregar"),e.qZA()}2&i&&e.Q6J("color","primary")}function ce(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39)(2,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeDialog())}),e._uU(3,"Cancelar"),e.qZA(),e.YNc(4,ne,2,1,"button",41),e.YNc(5,se,2,1,"button",41),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}function ae(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeDialog())}),e._uU(3,"Cerrar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("color","primary"))}let le=(()=>{class i{constructor(t,o,r,s,l,m,p,d){this.data=t,this._changeDetectorRef=o,this._couriersService=r,this._formBuilder=s,this._fuseConfirmationService=l,this._dialogRef=m,this._locationService=p,this.store=d,this.cities=[],this.states=[],this.stateSelected=null,this.user$=(0,S.of)(null),this._unsubscribeAll=new k.x,this.dialogMode=t.dialogMode,this.courier=this.data.courier}ngOnInit(){this.user$=this.store.select(R.rk),this.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this.courierForm=this._formBuilder.group({_id:[null],userId:[null,[a.kI.required]],active:[!0,[a.kI.required]],name:[null,[a.kI.required,a.kI.pattern("[a-zA-Z ]{2,254}")]],contact:[null,[a.kI.required]],email:[null,[a.kI.email,a.kI.required]],phone:[null,[a.kI.required]],address:[null,[a.kI.required]],city:[null,[a.kI.required]],state:[null,[a.kI.required]],obs:[null],cost:[null,[a.kI.min(0),a.kI.max(9999999),a.kI.required]]}),this.courierForm.get("state")?.valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.getCitiesByState(t),this._changeDetectorRef.markForCheck()}),this.courierForm.patchValue(this.courier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createCourier(){let t=this.courierForm.getRawValue();t=(0,N.omit)(t,["_id"]),t.userId=this.user._id,console.log(t),this._fuseConfirmationService.open({title:"Crear Operador Log\xedstico",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.createCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this.closeDialog(),this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateCourier(){const t=this.courierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Operador Log\xedstico",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.updateCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.closeDialog(),this._changeDetectorRef.markForCheck()})})}getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>{this.cities=o,this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.WI),e.Y36(e.sBO),e.Y36(C),e.Y36(a.QS),e.Y36(F.R),e.Y36(w.so),e.Y36(E.a),e.Y36(h.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["courier-dialog"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","flex-auto w-full",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"flex-auto","w-full"],[1,"relative","flex","flex-col","items-center","flex-auto","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"mt-3","text-2xl","font-bold","truncate"],[1,"flex","flex-col","pt-6","mt-4","space-y-8","border-t"],[1,"flex","sm:items-center"],[1,"ml-6","font-semibold","leading-6","min-w-30"],[1,"ml-6","leading-6"],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-8","md:flex-row"],[1,"flex","flex-col","w-full"],[1,"w-full"],["matInput","",3,"type","formControlName"],[1,""],[1,"flex","flex-col","gap-3","md:flex-row"],[1,"w-full","md:w-1/2"],[1,"w-full","fuse-mat-no-subscript"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","gap-3","mt-3","md:flex-row"],["matPrefix",""],["matInput","",3,"type","formControlName","min"],[1,"fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"flex","flex-col","mt-3"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[3,"value"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4",3,"color","click"],["mat-flat-button","",3,"color","click",4,"ngIf"],["mat-flat-button","",3,"color","click"],[1,"flex","items-center","justify-end","w-full","px-8","py-4","bg-gray-50"],["mat-flat-button","",1,"-ml-4",3,"color","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,X,2,0,"h2",2),e.YNc(4,ee,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,te,31,7,"div",4),e.BQk(),e.ynx(8),e.YNc(9,re,59,27,"div",5),e.BQk(),e.qZA(),e.YNc(10,ce,6,3,"ng-container",6),e.YNc(11,ae,4,1,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!o.data.courier.id&&"add"===o.dialogMode),e.xp6(1),e.Q6J("ngIf",o.data.courier.id&&"edit"===o.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.dialogMode),e.xp6(2),e.Q6J("ngIf","view"!==o.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","view"===o.data.dialogMode))},encapsulation:2,changeDetection:0}),i})();var ue=c(1927),f=c(6895),M=c(4098),O=c(4859),L=c(7392),b=c(9549),G=c(4144),Q=c(5655),me=c(1066);function pe(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",47),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function de(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",48),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const fe=function(i){return[i]};function ge(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",41)(2,"div",42),e._uU(3),e.qZA(),e.TgZ(4,"div",43),e._uU(5),e.qZA(),e.TgZ(6,"div",37),e.YNc(7,pe,2,1,"ng-container",30),e.YNc(8,de,2,1,"ng-container",30),e.qZA(),e.TgZ(9,"div",44)(10,"button",45),e._UZ(11,"mat-icon",26),e.qZA(),e.TgZ(12,"button",46),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.deleteCourier(s))}),e._UZ(13,"mat-icon",26),e.qZA()()(),e.BQk()}if(2&i){const t=n.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.contact," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink",e.VKq(7,fe,"/couriers/"+t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function he(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ge,14,9,"ng-container",40),e.BQk()),2&i){const t=n.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const _e=function(i){return{"pointer-events-none":i}},xe=function(){return[5,10,25,100]};function ve(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",33)(2,"div",34)(3,"div",35),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",36),e._uU(6," Contacto "),e.qZA(),e.TgZ(7,"div",37),e._uU(8," Activo "),e.qZA(),e.TgZ(9,"div",38),e._uU(10," Acciones "),e.qZA()(),e.YNc(11,he,2,2,"ng-container",30),e.ALo(12,"async"),e._UZ(13,"mat-paginator",39),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(8),e.Q6J("ngIf",e.lcZ(12,8,t.couriers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,_e,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,xe))("showFirstLastButtons",!0)}}function Ce(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ve,14,13,"ng-container",32),e.BQk()),2&i){const t=n.ngIf;e.oxw();const o=e.MAs(45);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function be(i,n){1&i&&(e.TgZ(0,"div",49),e._uU(1,"\xa1No hay Operadores Log\xedsticos registrados!"),e.qZA())}let Ze=(()=>{class i{constructor(t,o,r,s,l,m){this._couriersService=t,this._changeDetectorRef=o,this._dialog=r,this._fuseConfirmationService=s,this._fileSaverService=l,this.store=m,this.searchInputControl=new a.p4,this._unsubscribeAll=new k.x}ngOnInit(){this.couriers$=this.store.select(y),this.couriers$.subscribe(t=>this.couriers=t),this.store.select(K.B).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,H.b)(900),(0,_.w)(t=>this._couriersService.getCouriers(0,10,"name","asc",t))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),this.couriers$.pipe((0,Z.U)(t=>{t.length>0&&(0,j.T)(this._sort.sortChange,this._paginator.page).pipe((0,_.w)(()=>this._couriersService.getCouriers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))).subscribe()})))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.couriers,"couriers")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.couriers,"couriers")}deleteCourier(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar este transportista: ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.deleteCourier(t._id).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:`${s.message}`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}openDialog(t,o,r="70%"){this._dialog.open(le,{data:{courier:t,dialogMode:o},width:r,panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(e.sBO),e.Y36(w.uw),e.Y36(F.R),e.Y36(ue.m),e.Y36(h.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-couriers"]],viewQuery:function(t,o){if(1&t&&(e.Gf(J.NW,5),e.Gf(A.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(o._paginator=r.first),e.iGM(r=e.CRH())&&(o._sort=r.first)}},decls:46,vars:14,consts:[["cdkScrollable","","fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-500",3,"routerLink"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-80"],["matPrefix","",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-button","","routerLink","/couriers/new",1,"ml-4","bg-primary-500"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[1,"flex-auto","p-6","-mt-16","bg-gray-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-16","overflow-auto","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["xPosition","before"],["listCard01Menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngIf"],["noCouriers",""],[4,"ngIf","ngIfElse"],["fuseScrollbar","",1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","courier-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","lg:block"],[1,"hidden","text-center","lg:block"],[1,"text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","courier-grid","md:px-8"],[1,"truncate"],[1,"hidden","truncate","lg:block"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Operadores Log\xedsticos"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"h2",12),e._uU(19," Operadores Log\xedsticos "),e.qZA()()(),e.TgZ(20,"div",13)(21,"mat-form-field",14),e._UZ(22,"mat-icon",15)(23,"input",16),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"mat-icon",18),e.TgZ(26,"span",19),e._uU(27,"Nuevo"),e.qZA()()()(),e.TgZ(28,"div",20)(29,"div",21)(30,"div",22)(31,"div",23),e._uU(32,"Listado de Operadores Log\xedsticos"),e.qZA(),e.TgZ(33,"div",24)(34,"button",25),e._UZ(35,"mat-icon",26),e.qZA(),e.TgZ(36,"mat-menu",27,28)(38,"button",29),e.NdJ("click",function(){return o.exportAsExcelFile()}),e._uU(39,"Exportar a Excel"),e.qZA(),e.TgZ(40,"button",29),e.NdJ("click",function(){return o.exportAsCsvFile()}),e._uU(41,"Exportar a CSV"),e.qZA()()()(),e.YNc(42,Ce,2,2,"ng-container",30),e.ALo(43,"async"),e.YNc(44,be,2,0,"ng-template",null,31,e.W1O),e.qZA()()()),2&t){const r=e.MAs(37);e.xp6(6),e.Q6J("routerLink","/home"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar operador log\xedstico..."),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",r),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(7),e.Q6J("ngIf",e.lcZ(43,12,o.couriers$))}},dependencies:[g.rH,g.yS,f.mk,f.sg,f.O5,a.Fj,a.JJ,a.oH,M.PQ,O.lW,L.Hw,b.KE,b.qo,G.Nt,Q.VK,Q.OP,Q.p6,J.NW,A.YE,A.nU,me.H,f.Ov],encapsulation:2,data:{animation:D.L},changeDetection:0}),i})();class ye{constructor(){}}var Te=c(3238),T=c(9652),Ae=c(4385),ke=c(455),we=c(266);function Ie(i,n){1&i&&(e.TgZ(0,"a",55),e._uU(1,"Nuevo"),e.qZA())}function Fe(i,n){if(1&i&&(e.TgZ(0,"a",55),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.selectedCourier.name)}}function Qe(i,n){1&i&&(e.TgZ(0,"div",56),e._uU(1," Nuevo Operador Log\xedstico "),e.qZA())}function Ue(i,n){if(1&i&&(e.TgZ(0,"div",56),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.selectedCourier.name," ")}}function Je(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createCourier())}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Guardar"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.courierForm.valid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function qe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateCourier())}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Actualizar"),e.qZA()()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}function De(i,n){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Se(i,n){if(1&i&&(e.TgZ(0,"mat-option",61),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij("",t.city," ")}}const Ne=function(i,n){return{"hover:bg-gray-100 dark:hover:bg-hover":i,"bg-primary-50 dark:bg-hover":n}},Re=function(i){return{"text-primary dark:text-primary-500":i}};function Be(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",62),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l.goToStatePanel(l.states[s]))}),e.TgZ(2,"div")(3,"div",63),e._uU(4),e.qZA()()(),e.BQk()}if(2&i){const t=n.$implicit,o=n.index,r=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(3,Ne,!r.selectedDeliveryState||r.selectedDeliveryState!==r.states[o],r.selectedDeliveryState&&r.selectedDeliveryState===r.states[o])),e.xp6(2),e.Q6J("ngClass",e.VKq(6,Re,r.selectedDeliveryState&&r.selectedDeliveryState===r.states[o])),e.xp6(1),e.hij(" ",t," ")}}function Ye(i,n){1&i&&(e.ynx(0),e.TgZ(1,"div",64)(2,"div",65),e._uU(3," Seleccione una provincia "),e.qZA()(),e.BQk())}function Ee(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"form",71)(2,"div",72)(3,"mat-form-field",27)(4,"mat-label"),e._uU(5,"Costo en USD"),e.qZA(),e._UZ(6,"input",30),e.qZA(),e.ynx(7),e.TgZ(8,"div",73)(9,"button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.setCost())}),e._UZ(10,"mat-icon",75),e.qZA()(),e.BQk(),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("formGroup",t.globalCostForm),e.xp6(5),e.Q6J("type","number")("formControlName","cost"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:clipboard-copy")}}function Me(i,n){if(1&i&&(e.TgZ(0,"div",78)(1,"div",79),e._uU(2),e.qZA(),e.TgZ(3,"div",80)(4,"mat-form-field",27)(5,"mat-label"),e._uU(6,"Costo en USD"),e.qZA(),e._UZ(7,"input",81),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.hij(" ",t.get("name").value," "),e.xp6(5),e.Q6J("type","number")("formControl",t.get("cost"))}}function Oe(i,n){if(1&i&&(e.TgZ(0,"div",76),e.YNc(1,Me,8,3,"div",77),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.dynamicStatesForm.get("cities").controls)}}function Le(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",83),e.TgZ(2,"span",84),e._uU(3,"Costos guardados correctamente"),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function Ge(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",83),e.TgZ(2,"span",84),e._uU(3,"Costos actualizados correctamente"),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:check"))}function $e(i,n){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",85),e.TgZ(2,"span",84),e._uU(3,"Ya existen costos para esta provincia"),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"))}function ze(i,n){if(1&i&&(e.TgZ(0,"div",82),e.YNc(1,Le,4,1,"ng-container",67),e.YNc(2,Ge,4,1,"ng-container",67),e.YNc(3,$e,4,1,"ng-container",67),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf","success"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","updated"===t.flashMessage),e.xp6(1),e.Q6J("ngIf","error"===t.flashMessage)}}function je(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",46),e._uU(2),e.TgZ(3,"mat-slide-toggle",66),e._uU(4),e.qZA()(),e.YNc(5,Ee,11,4,"div",67),e.YNc(6,Oe,2,1,"div",68),e.TgZ(7,"div",23),e.YNc(8,ze,4,3,"div",69),e.TgZ(9,"button",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.saveCitiesCosts())}),e._UZ(10,"mat-icon",58),e.TgZ(11,"span",59),e._uU(12,"Guardar"),e.qZA()(),e.TgZ(13,"button",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.clearCitiesCosts())}),e._UZ(14,"mat-icon",58),e.TgZ(15,"span",59),e._uU(16,"Borrar"),e.qZA()()(),e.BQk()}if(2&i){const t=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.hij(" Listado de municipios de ",t," "),e.xp6(1),e.Q6J("formControl",o.allCities)("color","primary"),e.xp6(1),e.hij(" ",!0===o.allCities.value?"Precio por municipios":"Precio para toda la provincia"," "),e.xp6(1),e.Q6J("ngIf",!1===o.allCities.value),e.xp6(1),e.Q6J("ngIf",!0===o.allCities.value),e.xp6(2),e.Q6J("ngIf",o.flashMessage),e.xp6(1),e.Q6J("matTooltip","Guardar costo de envio para la provincia "+t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save"),e.xp6(3),e.Q6J("matTooltip","Borrar costo de envio para la provincia "+t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:trash")}}function He(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,je,17,11,"ng-container",52),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngSwitchCase",t)}}function Pe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createCourier())}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Guardar"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.courierForm.valid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateCourier())}),e._UZ(1,"mat-icon",58),e.TgZ(2,"span",59),e._uU(3,"Actualizar"),e.qZA()()}2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}const Ve=[{path:"",component:Ze,resolve:{couriers:(()=>{class i{constructor(t){this._couriersService=t}resolve(t,o){return this._couriersService.getCouriers()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}},{path:":courierId",component:(()=>{class i{constructor(t,o,r,s,l,m,p,d){this._activatedRoute=t,this._changeDetectorRef=o,this._couriersService=r,this._formBuilder=s,this._fuseConfirmationService=l,this._locationService=m,this._router=p,this.store=d,this.allCities=new a.p4(!0),this.cities=[],this.citiesToDelivery=[],this.courierId=null,this.destinations=[],this.editMode=!1,this.flashMessage=null,this.selectedCourier=new ye,this.selectedDeliveryState=null,this.selectedState=null,this.states=[],this.user$=(0,S.of)(null),this._unsubscribeAll=new k.x}ngOnInit(){this.user$=this.store.select(R.rk),this.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this.courierForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[a.kI.required]],active:[!0,[a.kI.required]],name:[null,[a.kI.required]],contact:[null],email:[null,[a.kI.email]],phone:[null],address:[null,[a.kI.required]],city:[{disabled:!0,value:""},[a.kI.required]],state:[null,[a.kI.required]],obs:[null],destinations:this._formBuilder.array([])}),this._activatedRoute.params.pipe((0,u.R)(this._unsubscribeAll)).subscribe(({courierId:t})=>{this.courierId=t,"new"!==this.courierId&&(this.editMode=!0,this.store.select(P).pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedCourier=o,this._getCitiesByState(o.state),this.courierForm.get("city").enable()}),this.courierForm.patchValue(this.selectedCourier)),this._changeDetectorRef.markForCheck()}),this.courierForm.get("state")?.valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this.courierForm.get("city").enable(),this._changeDetectorRef.markForCheck()}),this.dynamicStatesForm=this._formBuilder.group({name:[null],cities:this._formBuilder.array([])}),this.cityForm=this._formBuilder.group({name:[null],cost:[null]}),this.globalCostForm=this._formBuilder.group({cost:[null]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createCourier(){let t=this.courierForm.getRawValue();t=(0,N.omit)(t,["_id"]),t.destinations=this.destinations,console.log("Courier:",t),this._fuseConfirmationService.open({title:"Crear Operador Log\xedstico",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.createCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/couriers"),this._changeDetectorRef.markForCheck()})})}updateCourier(){const t=this.courierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Operador Log\xedstico",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._couriersService.updateCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/couriers"),this._changeDetectorRef.markForCheck()})})}goToStatePanel(t){if(this.selectedDeliveryState===t)return;this.selectedDeliveryState=t,this._getCitiesByState(t);const o=this.courierForm.get("destinations").value;if(o.length>0){if(o.findIndex(s=>s.name===t)>-1){const s=[];for(const l of o)l.name===t&&l.cities.forEach(p=>{s.push(this._formBuilder.group({name:p.name,cost:p.cost}))});return this.dynamicStatesForm=this._formBuilder.group({name:[t],cities:this._formBuilder.array([])}),void s.forEach(l=>{this.dynamicStatesForm.get("cities").push(l)})}this._locationService.getCitiesByState(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this.cities=s,this.dynamicStatesForm.reset(),this.dynamicStatesForm=this._formBuilder.group({name:[t],cities:this._formBuilder.array([])});const l=[];this.cities.forEach(m=>{l.push(this._formBuilder.group({name:m.city,cost:0}))}),l.forEach(m=>{this.dynamicStatesForm.get("cities").push(m)}),this.courierForm.get("destinations").push(this.dynamicStatesForm),this._changeDetectorRef.markForCheck()})}else{const r=[];if(this.cities.forEach(l=>{r.push(this._formBuilder.group({name:l.city,cost:0}))}),this.dynamicStatesForm=this._formBuilder.group({name:[t],cities:this._formBuilder.array([])}),r.forEach(l=>{this.dynamicStatesForm.get("cities").push(l)}),o.findIndex(l=>l.name===t)>-1)return;this.courierForm.get("destinations").push(this.dynamicStatesForm)}}saveCitiesCosts(){const t=this.courierForm.getRawValue(),o=this.dynamicStatesForm.getRawValue(),r=t.destinations.findIndex(s=>s.name===o.name);r>-1?t.destinations[r]=o:t.destinations.push(o),this._couriersService.updateCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._showFlashMessage("success")}clearCitiesCosts(){const t=this.courierForm.getRawValue(),o=this.dynamicStatesForm.getRawValue(),r=t.destinations.findIndex(s=>s.name===o.name);r>-1&&(t.destinations.splice(r),this._couriersService.updateCourier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.selectedDeliveryState=t.destinations[0].name;const l=[];if(t.destinations[0].cities.forEach(m=>{l.push(this._formBuilder.group({name:m.name,cost:m.cost}))}),this.dynamicStatesForm=this._formBuilder.group({name:[t.destinations[0].name],cities:this._formBuilder.array([])}),l.forEach(m=>{this.dynamicStatesForm.get("cities").push(m)}),t.destinations.length>0)for(const m of t.destinations){const p=[];p.push(this._formBuilder.group({name:m.name,cities:this._formBuilder.array([])}));for(const d of m.cities){const $=[];$.push(this._formBuilder.group({name:d.name,cost:d.cost})),$.forEach(Xe=>{p[0].get("cities").push(Xe)})}this.courierForm.get("destinations").clear(),p.forEach(d=>{this.courierForm.get("destinations").push(d)})}this._changeDetectorRef.markForCheck()}))}setCost(){const t=this.globalCostForm.get("cost").value,r=this.dynamicStatesForm.get("cities").controls;for(const s of r)s.get("cost").setValue(t)}_getCitiesByState(t){t!==this.selectedState&&this._locationService.getCitiesByState(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>{this.cities=o,this._changeDetectorRef.markForCheck()})}_showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.gz),e.Y36(e.sBO),e.Y36(C),e.Y36(a.QS),e.Y36(F.R),e.Y36(E.a),e.Y36(g.F0),e.Y36(h.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-courier-detail"]],decls:110,vars:45,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-500",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","ml-1 text-primary-500",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],["class","mt-2 text-3xl font-extrabold leading-tight tracking-tight sm:text-3xl",4,"ngIf"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","click",4,"ngIf"],["class","ml-4 text-white rounded-md bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"click",4,"ngIf"],[1,"flex-auto","p-6","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],[1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-4"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","required","",3,"type","formControlName","placeholder"],[1,"sm:col-span-2"],["matInput","",3,"type","formControlName"],[1,"sm:col-span-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"formControlName","type"],["matInput","","required","",3,"formControlName","type"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","flex-col","sm:flex-row"],[1,"flex","w-1/5"],[1,"flex","flex-col","w-full","p-5"],[1,"w-full","pb-2","mb-2","text-xl","font-semibold","text-gray-900","border-b"],[1,"flex","flex-wrap","gap-1"],[4,"ngFor","ngForOf"],[1,"flex","w-4/5"],[1,"w-full","p-5"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"ml-1","text-primary-500"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click"],[3,"value"],[1,"flex","px-4","py-2","rounded-md","cursor-pointer","bg-gray-50",3,"ngClass","click"],[1,"font-medium","leading-6",3,"ngClass"],[1,"flex","items-center","justify-center","w-full","h-full","bg-gray-50"],[1,"ml-10","text-3xl","text-hint"],[1,"ml-5",3,"formControl","color"],[4,"ngIf"],["class","grid w-full gap-5 p-5 mb-6 sm:grid-cols-2",4,"ngIf"],["class","flex items-center mr-4",4,"ngIf"],["mat-raised-button","",1,"ml-4","text-white","rounded-md","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"matTooltip","click"],["autocomplete","off",1,"flex","w-full","gap-5","p-5","mb-6",3,"formGroup"],[1,"flex","w-50"],[1,"flex","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Establecer precio en CUP para todos los municipios",1,"w-8","h-8","min-h-8",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"grid","w-full","gap-5","p-5","mb-6","sm:grid-cols-2"],["class","flex flex-col gap-2 sm:flex-row",4,"ngFor","ngForOf"],[1,"flex","flex-col","gap-2","sm:flex-row"],[1,"flex","items-center","w-1/3","pt-3","text-lg","font-semibold","text-gray-900"],[1,"w-1/3"],["matInput","",3,"type","formControl"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Operadores"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.YNc(14,Ie,2,0,"a",8),e.YNc(15,Fe,2,1,"a",8),e.qZA()(),e.TgZ(16,"div",9)(17,"a",10),e._UZ(18,"mat-icon",6),e.TgZ(19,"span",11),e._uU(20,"Regresar"),e.qZA()()()(),e.TgZ(21,"div",12),e.YNc(22,Qe,2,0,"div",13),e.YNc(23,Ue,2,1,"div",13),e.qZA()(),e.TgZ(24,"div",14),e.YNc(25,Je,4,2,"button",15),e.YNc(26,qe,4,1,"button",16),e.qZA()(),e.TgZ(27,"div",17)(28,"div",18)(29,"form",19)(30,"mat-accordion",20)(31,"mat-expansion-panel",21)(32,"mat-expansion-panel-header",22)(33,"mat-panel-title",23)(34,"div",24),e._uU(35," Informaci\xf3n General "),e.qZA()()(),e.TgZ(36,"div",25)(37,"div",26)(38,"mat-form-field",27)(39,"mat-label"),e._uU(40,"Nombre"),e.qZA(),e._UZ(41,"input",28),e.qZA()(),e.TgZ(42,"div",29)(43,"mat-form-field",27)(44,"mat-label"),e._uU(45,"Persona de contacto"),e.qZA(),e._UZ(46,"input",30),e.qZA()(),e.TgZ(47,"div",31)(48,"mat-form-field",27)(49,"mat-label"),e._uU(50,"Correo electr\xf3nico"),e.qZA(),e._UZ(51,"mat-icon",32)(52,"input",33),e.qZA()(),e.TgZ(53,"div",31)(54,"mat-form-field",27)(55,"mat-label"),e._uU(56,"Tel\xe9fono"),e.qZA(),e._UZ(57,"mat-icon",32)(58,"input",33),e.qZA()(),e.TgZ(59,"div",26)(60,"mat-form-field",27)(61,"mat-label"),e._uU(62,"Direcci\xf3n"),e.qZA(),e._UZ(63,"input",34),e.qZA()(),e.TgZ(64,"div",29)(65,"mat-form-field",27)(66,"mat-label"),e._uU(67,"Provincia"),e.qZA(),e._UZ(68,"mat-icon",35),e.TgZ(69,"mat-select",36),e.YNc(70,De,2,2,"mat-option",37),e.qZA()()(),e.TgZ(71,"div",29)(72,"mat-form-field",27)(73,"mat-label"),e._uU(74,"Municipio"),e.qZA(),e._UZ(75,"mat-icon",35),e.TgZ(76,"mat-select",36),e.YNc(77,Se,2,2,"mat-option",37),e.qZA()()(),e.TgZ(78,"div",26)(79,"mat-form-field",38)(80,"mat-label"),e._uU(81,"Observaciones"),e.qZA(),e._UZ(82,"textarea",39),e.qZA()(),e.TgZ(83,"div",31)(84,"div",40)(85,"span",41),e._uU(86,"Estado"),e.qZA(),e.TgZ(87,"mat-slide-toggle",42),e._uU(88),e.qZA()()()()(),e.TgZ(89,"mat-expansion-panel")(90,"mat-expansion-panel-header",22)(91,"mat-panel-title",23)(92,"div",24),e._uU(93," Destinos de entrega "),e.qZA()()(),e.TgZ(94,"div",43)(95,"div",44)(96,"div",45)(97,"div",46),e._uU(98," Provincias "),e.qZA(),e.TgZ(99,"div",47),e.YNc(100,Be,5,8,"ng-container",48),e.qZA()()(),e.TgZ(101,"div",49)(102,"div",50),e.ynx(103,51),e.YNc(104,Ye,4,0,"ng-container",52),e.YNc(105,He,2,1,"div",48),e.BQk(),e.qZA()()()()()()()(),e.TgZ(106,"div",53)(107,"div",54),e.YNc(108,Pe,4,2,"button",15),e.YNc(109,Ke,4,1,"button",16),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("routerLink","/home"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("routerLink","/couriers"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(4),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("ngIf","new"===o.courierId),e.xp6(1),e.Q6J("ngIf","new"!==o.courierId),e.xp6(3),e.Q6J("formGroup",o.courierForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre del operador"),e.xp6(5),e.Q6J("type","text")("formControlName","contact"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControlName","email")("type","email"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:phone"),e.xp6(1),e.Q6J("formControlName","phone")("type","tel"),e.xp6(5),e.Q6J("formControlName","address")("type","text"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",o.states),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",o.cities),e.xp6(5),e.Q6J("formControlName","obs"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.courierForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(10),e.Q6J("ngForOf",o.states),e.xp6(3),e.Q6J("ngSwitch",o.selectedDeliveryState),e.xp6(2),e.Q6J("ngForOf",o.states),e.xp6(3),e.Q6J("ngIf","new"===o.courierId),e.xp6(1),e.Q6J("ngIf","new"!==o.courierId))},dependencies:[g.yS,f.mk,f.sg,f.O5,f.RF,f.n9,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,M.PQ,Te.ey,O.lW,T.pp,T.ib,T.yz,T.yK,L.Hw,b.KE,b.hX,b.qo,G.Nt,Ae.gD,ke.Rr,we.gM],encapsulation:2,data:{animation:D.L},changeDetection:0}),i})(),resolve:{courier:(()=>{class i{constructor(t){this._couriersService=t}resolve(t,o){const r=t.paramMap.get("courierId");if("new"!==r)return this._couriersService.getCourierById(r)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}];let We=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ve),z.m]}),i})()}}]);